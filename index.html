<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gothic Cats</title>
<link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Montserrat:wght@400&display=swap" rel="stylesheet">
<style>
:root {
  --blood: #9b0000;
  --violet: #b48ead;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle at top,#1b001b,#000);
  font-family: 'Montserrat', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  color: #eee;
}

/* Gothic rain effect */
.rain {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}
.rain::before {
  content:"";
  position:absolute;
  inset:0;
  background: repeating-linear-gradient(90deg,transparent,transparent 20px,rgba(180,142,173,.03) 21px,transparent 22px),
              repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(139,0,0,.08) 3px,transparent 4px);
  animation: rainFall .8s linear infinite;
}
.rain::after {
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 30% 20%,rgba(155,0,0,.15) 0%,transparent 50%);
  animation: pulseGlow 4s ease-in-out infinite;
}
@keyframes rainFall { from{transform:translateY(-100%)} to{transform:translateY(100%)} }
@keyframes pulseGlow { 0%,100%{opacity:.3} 50%{opacity:.7} }

.container {
  width:min(90vw,380px);
  background: rgba(0,0,0,.75);
  border-radius: 20px;
  padding: 24px 20px 30px;
  text-align: center;
  box-shadow: 0 0 40px rgba(180,0,180,.5), inset 0 0 20px rgba(0,0,0,.5);
  position: relative;
  z-index: 2;
  border:1px solid rgba(180,142,173,.1);
}

h1 {
  font-family: 'UnifrakturCook', cursive;
  color: var(--violet);
  font-size: clamp(2rem,8vw,3rem);
  margin:0 0 24px;
  text-shadow: 0 0 10px rgba(180,142,173,.5),0 0 20px rgba(180,142,173,.2);
  letter-spacing:1px;
}

.cats {
  font-size: 2.2rem;
  margin:0 0 24px;
  animation: float 3s ease-in-out infinite;
  filter: drop-shadow(0 0 8px rgba(155,0,0,.5));
}
@keyframes float {0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}

#trickButton {
  display:inline-block;
  padding:14px 32px;
  font-size:.9rem;
  border-radius:999px;
  border:none;
  background:linear-gradient(145deg,var(--blood),#7a0000);
  color:#000;
  font-weight:bold;
  box-shadow:0 0 20px rgba(155,0,0,.8),inset 0 1px 0 rgba(255,255,255,.2);
  cursor:pointer;
  transition: all .3s ease;
  -webkit-tap-highlight-color: transparent;
  position: relative;
  z-index: 2;
  text-transform: uppercase;
  letter-spacing:.5px;
}
#trickButton:hover { background:linear-gradient(145deg,#cc0000,var(--blood)); box-shadow:0 0 30px rgba(155,0,0,1) }
#trickButton:active { transform: scale(.95); box-shadow:0 0 10px rgba(155,0,0,.6) }

.sound-indicator {
  position:fixed; top:20px; right:20px;
  width:40px; height:40px;
  background: rgba(0,0,0,.7);
  border:1px solid var(--violet);
  border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  color: var(--violet);
  cursor:pointer;
  z-index:10;
  transition: all .3s ease;
  font-size:1.2rem;
}
.sound-indicator:hover { background: var(--violet); color:#000; transform: scale(1.1); }
.sound-indicator.muted { opacity:.7; }
.sound-indicator.muted::after {
  content:""; position:absolute;
  width:2px; height:50px;
  background: var(--blood);
  transform: rotate(45deg); transform-origin:center;
}

.audio-prompt {
  position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
  background: rgba(0,0,0,.9); border:1px solid var(--violet);
  color: var(--violet); padding:12px 24px; border-radius:10px;
  font-size:.9rem; z-index:100; text-align:center; box-shadow:0 0 20px rgba(180,142,173,.3);
  display:none; animation: fadeInOut 2s infinite;
}
.audio-prompt.show { display:block; }
@keyframes fadeInOut { 0%,100%{opacity:.7;transform:translateX(-50%) translateY(0)} 50%{opacity:1;transform:translateX(-50%) translateY(-5px)} }

.message {
  position: fixed; inset:0;
  display:flex; justify-content:center; align-items:center;
  background: rgba(0,0,0,.95);
  opacity:0;
  pointer-events:none;
  transition: opacity .3s ease;
  z-index:100;
}
.message.show { opacity:1; pointer-events:all; }
.message span {
  font-family: 'UnifrakturCook', cursive;
  font-size: clamp(2.4rem,9vw,3.2rem);
  color: var(--blood);
  text-shadow:0 0 30px rgba(155,0,0,.9),0 0 60px rgba(155,0,0,.6);
  animation: glitch .8s infinite;
}
@keyframes glitch {
  0%{transform:translate(0);text-shadow:2px 2px 0 #000,-1px -1px 0 rgba(155,0,0,.5)}
  25%{transform:translate(-1px,1px);text-shadow:-1px -1px 0 rgba(155,0,0,.5),1px 1px 0 #000}
  50%{transform:translate(1px,-1px);text-shadow:1px -1px 0 rgba(255,0,0,.3),-1px 1px 0 rgba(100,0,0,.3)}
  75%{transform:translate(-1px,-1px);text-shadow:-1px 1px 0 rgba(100,0,0,.3),1px -1px 0 rgba(255,0,0,.3)}
  100%{transform:translate(0);text-shadow:2px 2px 0 #000,-1px -1px 0 rgba(155,0,0,.5)}
}
</style>
</head>
<body>

<div class="rain"></div>
<div class="sound-indicator muted" id="soundToggle">üîá</div>
<div class="audio-prompt" id="audioPrompt">üîä Click to enable sound</div>

<div class="container">
  <h1>Gothic Cats</h1>
  <div class="cats">üêà‚Äç‚¨õ ü©∏ üêà‚Äç‚¨õ</div>
  <button id="trickButton">Touch the curse</button>
</div>

<div class="message" id="message"><span>safa lmongol!!</span></div>

<script>
const button = document.getElementById('trickButton');
const message = document.getElementById('message');
const soundToggle = document.getElementById('soundToggle');
const audioPrompt = document.getElementById('audioPrompt');

let moveCount = 0, maxMoves = 5, audioUnlocked = false, soundsEnabled = false, ctx, bgOsc;

function unlockAudio() {
  if(audioUnlocked) return;
  if(!ctx) ctx = new (window.AudioContext||window.webkitAudioContext)();
  if(ctx.state==='suspended') ctx.resume().then(()=>{startAudio();}).catch(()=>{audioPrompt.classList.add('show');});
  else startAudio();
}

function startAudio(){
  audioUnlocked=true;
  soundsEnabled=true;
  updateUI();
  createBG();
}

function updateUI(){
  soundToggle.textContent = soundsEnabled ? 'üîä' : 'üîá';
  soundToggle.classList.toggle('muted',!soundsEnabled);
  audioPrompt.classList.toggle('show',!audioUnlocked);
}

function toggleSounds(){
  if(!audioUnlocked){ unlockAudio(); return; }
  soundsEnabled = !soundsEnabled;
  if(bgOsc) bgOsc.gain.setValueAtTime(soundsEnabled?.05:0, ctx.currentTime);
  updateUI();
}

function createBG(){
  bgOsc = ctx.createGain();
  const osc = ctx.createOscillator();
  osc.type='sawtooth';
  osc.frequency.value=60;
  osc.connect(bgOsc);
  bgOsc.connect(ctx.destination);
  bgOsc.gain.value=0.05;
  osc.start(); osc.stop(ctx.currentTime+1000); // infinite
}

function playPop(){ if(!audioUnlocked||!soundsEnabled) return; const osc=ctx.createOscillator(); const gain=ctx.createGain(); osc.type='sine'; osc.frequency.setValueAtTime(200,ctx.currentTime); osc.frequency.exponentialRampToValueAtTime(50,ctx.currentTime+.1); gain.gain.setValueAtTime(.1,ctx.currentTime); gain.gain.exponentialRampToValueAtTime(.01,ctx.currentTime+.1); osc.connect(gain); gain.connect(ctx.destination); osc.start(); osc.stop(ctx.currentTime+.1); }
function playReveal(){ if(!audioUnlocked||!soundsEnabled) return; const osc=ctx.createOscillator(); const gain=ctx.createGain(); osc.type='triangle'; osc.frequency.setValueAtTime(400,ctx.currentTime); osc.frequency.exponentialRampToValueAtTime(800,ctx.currentTime+.5); gain.gain.setValueAtTime(.1,ctx.currentTime); gain.gain.exponentialRampToValueAtTime(.01,ctx.currentTime+.5); osc.connect(gain); gain.connect(ctx.destination); osc.start(); osc.stop(ctx.currentTime+.5); }

function moveButton(){
  if(moveCount>=maxMoves) return;
  const x = (Math.random()-0.5)*0.5*window.innerWidth;
  const y = (Math.random()-0.5)*0.3*window.innerHeight;
  button.style.transform=`translate(${x}px,${y}px)`;
  moveCount++;
  playPop();
  const cats = document.querySelector('.cats');
  cats.style.animation='none';
  setTimeout(()=>cats.style.animation='float 3s ease-in-out infinite',100);
  if(moveCount>=maxMoves){
    setTimeout(()=>{button.textContent='Reveal Curse'; button.style.transform='translate(0,0)'; cats.style.filter='drop-shadow(0 0 15px rgba(155,0,0,.8))'},300);
  }
}

function showMessage(){
  if(moveCount<maxMoves) return;
  playReveal();
  message.classList.add('show');
  setTimeout(()=>message.classList.remove('show'),1600);
}

function setupEvents(){
  button.addEventListener('mouseenter',()=>{ if(moveCount<maxMoves){ moveButton(); } });
  button.addEventListener('touchstart', e=>{ e.preventDefault(); unlockAudio(); moveButton(); if(moveCount>=maxMoves) showMessage(); }, {passive:false});
  button.addEventListener('click', ()=>{ unlockAudio(); moveButton(); if(moveCount>=maxMoves) showMessage(); });
  soundToggle.addEventListener('click', toggleSounds);
  audioPrompt.addEventListener('click', unlockAudio);
  ['click','touchstart','keydown'].forEach(ev=>document.addEventListener(ev,unlockAudio,{once:true}));
  setTimeout(()=>{ if(!audioUnlocked) audioPrompt.classList.add('show'); },1000);
}

setupEvents();
updateUI();
</script>

</body>
</html>
